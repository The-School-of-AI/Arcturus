
# Arcturus - Verified Feature Inventory

## 1. Core Architecture
- **Agent Loop (Graph-Based)**: `AgentLoop4` (in `core/loop.py`) is a DAG-based planner-executor.
  - **Dynamic Execution**: Can add new steps/nodes at runtime based on the plan.
  - **Static Agent Types**: Agent classes (`Planner`, `Coder`, etc.) are hardcoded in `agent_config.yaml`. (Answers Q2)
- **Model Context Protocol (MCP)**:
  - **Dynamic Discovery**: Scans `mcp_servers/` for tools.
  - **Stability Issues**: Hot-reloading of servers is fragile (Q3).
- **Multi-Model Support**:
  - **Gemini**: Primary model for logic/planning.
  - **Ollama**: Used directly by `IDE Agent` for local code privacy.

## 2. Intelligence & Agents
Defined in `config/agent_config.yaml`.
- **Specialized Agents**:
  - `PlannerAgent`: Generates execution graphs.
  - `BrowserAgent`: Uses `browser` MCP (Headless).
  - `CoderAgent`: Writes code, uses `sandbox` MCP.
  - `RetrieverAgent`: Uses `rag` MCP.
  - `IDE Agent` (`routers/ide_agent.py`): **Separate System** for "Chat with Codebase". Uses Ollama directly, supports Vision (images/screenshots).
  - Others: `Summarizer`, `Distiller`, `Thinker`, `Formatter`, `Clarification`, `QA`, `Test`, `Debugger`.
- **Skill Usage**:
  - Agents *do* use skills (`core/skills`). Skills inject specific instructions/tools into the agent's prompt context (Q6, Q17).

## 3. App Engine (App Maker)
Controlled by `routers/apps.py`.
- **Generation**: Creates `ui.json` layouts from prompts (`ReportToAppPrompt.md`).
  - **Limitation**: Often defaults to text-heavy cards if data extraction fails (Q5).
- **Hydration**: Updates data in existing apps.
  - **Limitation**: Preserves layout, only updates values. Cannot dynamically redesign UI (Q4).

## 4. Memory & Personalization (RemMe)
- **Episodic Memory**:
  - **Recording**: Every run is saved to `EpisodicMemory` (Q8).
  - **Recall**: *Passive*. Not actively searched during planning, mostly for record-keeping.
- **Semantic Memory**:
  - **Active Usage**: `routers/runs.py` injects relevant past memories into every `AgentLoop` run based on the query (Q9).
- **User Profiling**:
  - **Background Process**: `RemMe` analyzes sessions to build profiles.
  - **Usage**: "Compact Preferences" are injected into agent prompts. The full "Psychological Profile" (`Cortex-R`) is mostly for UI display, not agent persona injection (Q7, Q10).

## 5. RAG & Knowledge
- **Deep Search**:
  - Semantic Search (`rag` router).
  - Keyword/Regex Search.
  - **RAG Usage**: `RetrieverAgent` actively calls RAG tools (Q12).
- **Document Previews**:
  - Disparate implementations. No unified preview service (Q13, Q14).

## 6. Tools & Sandbox
- **Browser Automation**: 
  - **Backend**: `mcp_servers/browser/server.py` uses `browser-use` (Playwright/Selenium).
  - **Frontend**: "Talk to Browser" sends URLs to this backend. It is *not* a Chrome Extension (Q15).
- **Code Execution**:
  - **Sandbox MCP**: `mcp_servers/server_sandbox.py`.
  - **Loop Execution**: `AgentLoop4` has built-in capability to execute python code chunks generated by agents (Q16).

## 7. Frontend / UI
- **Tech Stack**: React + Vite + Electron + TailwindCSS.
- **Key Features**:
  - **Chat Interface**: Support for text and image inputs.
  - **App Dashboard**: Renders `ui.json` files.
  - **Graph Visualizer**: Shows the Agent DAG.
  - **Terminal & Editor**: Integrated Monaco Editor and XTerm.
